<html>

<head>
	<meta charset="utf-8">
	<title>Chronologie des tensions liées à l’eau au Cameroun</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://use.typekit.net/nqh8ygh.css">
	<link href='style.css' rel='stylesheet' />
</head>

<body>

	<div class="box">

		<button id="originalPosition" style="display:none;">Consulter la chronologie →</button>
		<button id="mobileButton">Suivant →</button>

		<h1>Chronologie des tensions liées à l’eau au Cameroun</h1>

	</div>

	<div id="map"></div>

	<div id="mapInset"></div>

	<div id="locationInfo" style="display: none;">
		<h2 id="locationTitle"></h2>
		<p id="locationDescription"></p>
	</div>

	<div id="navigationControls">
		<button class="locationButton" data-location="0">10 aoUt 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">&#x7c;</span>
		<button class="locationButton" data-location="1">14 aoUt 2021</button>
		<span style="color: fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="2">23 septembre 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="3">2 octobre 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="4">5 dEcembre 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="5">8 dEcembre 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="6">15 dEcembre 2021</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="7">11 janvier 2022</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="8">6-7 octobre 2023</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="9">Dec 2023 - Feb 2024</button>
		<span style="color: #fff; font-weight: bold; align-self: center; font-size: 10px;">|</span>
		<button class="locationButton" data-location="10">Perspectives d’avenir</button>
	</div>

	<script>

		// Show the map container
		document.getElementById('map').style.display = 'block';

		function getZoomLevel() {
			const width = window.innerWidth;
			if (width < 600) {
				return 6; // More zoomed out for smaller devices
			} else if (width >= 600 && width < 1000) {
				return 7;
			} else {
				return 8; // More zoomed in for larger devices
			}
		}

		mapboxgl.accessToken = 'pk.eyJ1IjoiZGFsdG9ud2IiLCJhIjoiOWdSSXFQSSJ9.HZyjh4g3TAAOAncwelv9Vw';
		const map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/daltonwb/clvdt2nth01lp01ql8uezdro1',
			zoom: 8.5,
			bearing: -20,
			center: [14.863725, 11.592343],
			projection: 'globe',
			pitch: 45,
			maxZoom: 14,
			minZoom: 8,
			maxBounds: [[12.803782352780502, 10.268535070350396], [17.043613795438773, 13.055481325837178]],
			dragPan: false,
			scrollZoom: false,
			doubleClickZoom: false,
			interactive: false,
			attributionControl: false
		});

		window.addEventListener('resize', function () {
			map.setZoom(getZoomLevel());
		});

		map.on('load', function () {
			document.getElementById('originalPosition').onclick = function () {
				map.flyTo({
					center: [14.863725, 11.592343],  // Longitude, Latitude
					zoom: 8.5,
					bearing: -20,
					pitch: 45
				});

				// Hide the locationInfo element
				document.getElementById('locationInfo').style.display = 'none';
			};
		});

		var locations = [
			{ lat: 11.79426383, lon: 15.14228381, pitch: 35, bearing: -57.5, zoom: 14, title: '10 août 2021 | TCHAD', description: 'Première vague de violence – Dans le village de Missiska, dans l’arrondissement du Logone Birni (département du Logone-et-Chari, Extrême-Nord), de violents affrontements ont éclaté lorsqu’un bassin creusé par des pêcheurs Mousgoum a piégé et tué des bovins appartenant à des éleveurs arabes Choa. Les Mousgoum ont évacué les femmes et les enfants vers leur communauté voisine Mousgoum vivant de l’autre côté du fleuve Logone, au TTCHAD. Le conflit a fait au moins 45 morts et 74 blessés. Au moins dix-neuf villages ont brûlé et quarante autres ont été abandonnés par leurs habitants.' },
			{ lat: 12.08725499, lon: 15.01527438, pitch: 35, bearing: -40, zoom: 14, title: '14 août 2021 | CAMEROUN', description: 'Le gouverneur de l’Extrême-Nord, Midjiyawa Bakari, s’est rendu à Kousseri, la capitale du Logone-et-Chari, pour apaiser les tensions. Les autorités ont ordonné le déploiement de forces de sécurité dans plus de cent villages sinistrés de la région. Pendant ce temps, les leaders communautaires ont lu une déclaration commune dans laquelle ils s’engageaient « à ne ménager aucun effort pour un retour définitif de la paix entre les deux communautés qui coexistent ».' },
			{ lat: 11.39823307, lon: 14.56872937, pitch: 0, bearing: 0, zoom: 14.5, title: '23 septembre 2021 | CAMEROUN', description: 'Des Arabes Choa des villages de Malia et Toukoumaya se sont affrontés dans le cadre d’un litige foncier près de Waza, une ville du Logone-et-Chari. Cinq personnes ont été blessées.' },
			{ lat: 12.08725499, lon: 15.01527438, pitch: 35, bearing: -40, zoom: 14, title: '2 octobre 2021 | CAMEROUN', description: 'Les Arabes Choa et les Mousgoum se sont affrontés dans le quartier de Gueli à Kousseri après une dispute entre des membres des deux groupes. Une personne a été blessée et un véhicule a été incendié.' },
			{ lat: 11.39823307, lon: 14.56872937, pitch: 0, bearing: 0, zoom: 14.5, title: '5 décembre 2021 | CAMEROUN', description: 'Deuxième vague de violence – Des affrontements entre éleveurs, agriculteurs et pêcheurs ont éclaté dans le village d’Ouloumsa, ville du Logone-Birni, Extrême-Nord.' },
			{ lat: 12.08725499, lon: 15.01527438, pitch: 35, bearing: -40, zoom: 14, title: '8 décembre 2021 | CAMEROUN', description: 'Les affrontements qui ont éclaté à Ouloumsa se sont rapidement propagés dans les villages, pour atteindre Kousseri le 8 décembre 2021. Au moins 44 personnes ont été tuées et plus de 100 ont été blessées.' },
			{ lat: 12.08725499, lon: 15.01527438, pitch: 35, bearing: -40, zoom: 14, title: '16 décembre 2021 | CAMEROUN', description: 'Une délégation gouvernementale comprenant le ministre de l’administration territoriale, des responsables politiques et des militaires a consulté les autorités traditionnelles Arabes Choas et Mousgoum dans le cadre d’une action de consolidation de la paix. Environ 100 000 personnes avaient été déplacées.' },
			{ lat: 12.08725499, lon: 15.01527438, pitch: 35, bearing: -40, zoom: 14, title: '10 janvier 2022 | CAMEROUN', description: 'À Kousseri, les forces de sécurité ont réprimé une émeute des Arabes Choas qui protestaient contre l’arrestation de l’ancien maire accusé d’être impliqué dans les meurtres de décembre 2021, faisant quatre blessés et provoquant de nombreuses arrestations. Le lendemain, les Mousgoums et les Arabes Choas se sont affrontés à balles réelles après que ces derniers aient été accusés d’avoir tué deux membres de la communauté Mousgoum.' },
			{ lat: 12.56270807, lon: 14.44745073, pitch: 35, bearing: -40, zoom: 14, title: '6-7 octobre 2023 | CAMEROUN', description: 'Entre le 6 et le 7 octobre 2023, des agriculteurs Kotoko se sont affrontés à des éleveurs arabes Choa à Makary, Goulfey, Amdagalgui et Ngouma (Logone-et-Chari, Extrême-Nord), faisant au moins deux morts et 20 blessés.' },
			{ lat: 12.87759002, lon: 14.29758313, pitch: 35, bearing: -40, zoom: 14, title: 'Décembre 2023-février 2024 | CAMEROUN', description: 'Les militants de Boko Haram et de la province d’Afrique de l’Ouest de l’État islamique ont lancé plus d’une douzaine d’attaques contre des communautés de pêcheurs dans la partie nord de la division du Logone-et-Chari, enlevant environ 25 personnes et en tuant au moins sept. Des milliers de personnes ont fui vers le sud de la division, ce qui n’a fait qu’augmenter la pression sur les ressources disponibles dans cette zone.' },
			{ lat: 11.592343, lon: 14.863725, pitch: 15, bearing: 0, zoom: 8, title: 'Perspectives d’avenir', description: 'En février 2024, les parties prenantes se sont réunies à Yaoundé pour harmoniser les plans de développement de l’Extrême-Nord, alors qu’un programme présidentiel de reconstruction annoncé en mai 2022 et estimé à 3 milliards de dollars devrait être mis en œuvre plus tard dans l’année.' },
		];

		var currentLocation = 0;

		function navigateLocations() {
			if (currentLocation >= locations.length) {
				currentLocation = 0; // Loop back to the first location
			}
			updateMapAndView(locations[currentLocation]);
			currentLocation++;
		}

		function updateMapAndView(location) {
			map.flyTo({
				center: [location.lon, location.lat],
				pitch: location.pitch,
				bearing: location.bearing,
				zoom: location.zoom,
				speed: .4,
				curve: 1.5,
				essential: true // this animation is considered essential with respect to prefers-reduced-motion
			});

			// Update HTML content
			document.getElementById('locationTitle').innerText = location.title || 'Location Title';
			document.getElementById('locationDescription').innerText = location.description || 'Location description here.';
			document.getElementById('locationInfo').style.display = 'block'; // Make the container visible
		}

		function jumpToLocation(index) {
			// Since this is called by direct jump buttons, stop the sequential navigation
			currentLocation = index; // Set current location to index for potential future navigation control
			updateMapAndView(locations[index]);
		}

		document.getElementById('mobileButton').addEventListener('click', navigateLocations);

		// Attach event listeners to the navigation buttons
		var navButtons = document.querySelectorAll('.locationButton');
		navButtons.forEach(button => {
			button.addEventListener('click', function () {
				var index = this.getAttribute('data-location');
				jumpToLocation(parseInt(index, 10));
			});
		});

		const insetMap = new mapboxgl.Map({
			container: 'mapInset',
			style: 'mapbox://styles/daltonwb/clvdswc3n01lj01ql8ggy4a1o',
			center: [14.863725, 11.592343],
			zoom: 2,
			hash: false,
			interactive: false,
			projection: 'globe',
			attributionControl: false
		});

		insetMap.on('load', () => {

			insetMap.addSource('boundsSource', {
				'type': 'geojson',
				'data': {
					"type": "FeatureCollection",
					"features": [
						{
							"type": "Feature",
							"properties": {},
							"geometry": {
								"coordinates": [
									[
										[
											12.803783031458977,
											13.05263832236892
										],
										[
											12.803783031458977,
											10.268532663973957
										],
										[
											17.043614474117277,
											10.268532663973957
										],
										[
											17.043614474117277,
											13.05263832236892
										],
										[
											12.803783031458977,
											13.05263832236892
										]
									]
								],
								"type": "Polygon"
							}
						}
					]
				}
			});

			insetMap.addLayer({
				'id': 'boundsLayer',
				'type': 'fill',
				'source': 'boundsSource', // reference the data source
				'layout': {},
				'paint': {
					'fill-color': '#ccc', // blue color fill
					'fill-opacity': 0.4
				}
			});
			// // Add a black outline around the polygon.
			insetMap.addLayer({
				'id': 'outlineLayer',
				'type': 'line',
				'source': 'boundsSource',
				'layout': {},
				'paint': {
					'line-color': '#798271',
					'line-width': 1
				}
			});
		});

		map.scrollZoom.disable();
		map.addControl(new mapboxgl.AttributionControl({
			customAttribution: 'International Crisis Group | Map: Paul Franz and Claire Boccon-Gibod'
		}));

	</script>

</body>

</html>