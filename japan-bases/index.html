<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Robots: index this as the canonical page -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />

  <!-- Canonical & icons -->
  <link rel="canonical" href="https://www.crisisgroup.org/visual-explainers/israeli-settlements" />
  <link rel="icon" type="image/x-icon"
    href="https://www.crisisgroup.org/visual-explainers/israeli-settlements/images/favicon.ico" />

  <!-- Primary SEO -->
  <title>[Visual] Mapping Israeli Settlement Expansion (Updated 2025) | International Crisis Group</title>
  <meta name="description"
    content="The 2025 update of our visual explainer on Israeli settlement expansion in the West Bank and its geopolitical impact." />
  <meta name="author" content="International Crisis Group" />
  <meta property="article:published_time" content="2025-10-08T07:00:00+00:00" />

  <!-- Open Graph -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="article" />
  <meta property="og:site_name" content="International Crisis Group" />
  <meta property="og:title"
    content="[Visual] Mapping Israeli Settlement Expansion (Updated 2025) | International Crisis Group" />
  <meta property="og:description"
    content="Explore the 2025 edition of our interactive map of Israeli settlement expansion in the occupied West Bank." />
  <meta property="og:url" content="https://www.crisisgroup.org/visual-explainers/israeli-settlements" />
  <meta property="og:image"
    content="https://www.crisisgroup.org/visual-explainers/israeli-settlements/images/israel_social_2025.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@crisisgroup" />
  <meta name="twitter:title"
    content="[Visual] Mapping Israeli Settlement Expansion (Updated 2025) | International Crisis Group" />
  <meta name="twitter:description"
    content="The 2025 edition of our interactive explainer on Israeli settlement expansion in the West Bank." />
  <meta name="twitter:image"
    content="https://www.crisisgroup.org/visual-explainers/israeli-settlements/images/israel_social_2025.jpg" />

  <!-- CSS / JS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js"></script>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://use.typekit.net/nqh8ygh.css" />

  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
      var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-TD5NKJJ');
  </script>
</head>


<body>
  <!-- Title + Year Slider -->
  <div class="slider-container">
    <h1>Japan’s Maritime Footprint</h1>
  </div>

  <!-- Legend -->
  <div class="legend" id="legend">
    <div class="legend-header" id="legendToggle">
      <h2>Map Legend</h2>
    </div>

    <div class="legend-list">
      <p><i class="lg lg-settlements"></i>Islands</p>
      <p><i class="lg lg-outposts"></i>Cities</p>
      <p><i class="lg lg-areas-ab"></i>Bases</p>

      <!--  Force this to end column 1 
      <p class="break-after"><i class="lg lg-plan-e1"></i>Plan E1</p>

      <p><i class="lg lg-line lg-road-israeli"></i>Planned Israeli-only roads</p>
      <p><i class="lg lg-line lg-bypass-pal"></i>Planned bypass road for Palestinians</p>
      <p><i class="lg lg-line lg-fence"></i>Planned fence</p>
      <p><i class="lg lg-line lg-barriers"></i>Current barrier fence</p> -->

      <div id="morebox">
        <a href="#infobox" id="infoLink" class="info-icon"><em>i</em></a>
        <span id="more-info-text">More Information</span>
      </div>
    </div>

    <hr />
    <p>
      Read our full report on Israeli West Bank annexation
      <a class="reportlink"
        href="https://www.crisisgroup.org/middle-east-north-africa/israelpalestine/252-sovereignty-all-name-israels-quickening-annexation-west-bank"
        target="_blank">here</a>.
    </p>

    <!-- Modal -->
    <div id="myModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal-content" tabindex="-1">
        <div class="modal-header">
          <h3 id="modal-title">About This Map</h3>
          <button type="button" class="close" aria-label="Close modal">&times;</button>
        </div>

        <div class="modal-scroll">
          <p>
            <strong class="label-e1">Plan E1</strong> is a settlement project in an area east of Jerusalem inside the
            West Bank. Construction was approved in August, after being frozen for decades due to U.S. objections.
          </p>

          <p>
            <strong class="label-bypass">Israeli bypass roads</strong> are the ones that only Israeli-licensed vehicles
            (including vehicles belonging to Palestinians with Jerusalem residence permits) are allowed to use.
          </p>

          <p>
            Planned bypass or “fabric of life” roads are solely for West Bank Palestinians. On 29 March, the Israeli
            cabinet authorised <strong class="label-pal-road">a bypass road</strong> designated exclusively for West
            Bank Palestinians to allow seamless connection of Israel’s own road system in occupied territory and set the
            stage for the E1 settlement. Together, the road and the east-west extension of Israeli settlements will in
            effect cleave the West Bank in two, making it easy for Israel to block Palestinians’ travel between north
            and south, as well as further isolating both parts of the West Bank from the large Palestinian population of
            East Jerusalem.
          </p>

          <p>
            <strong class="label-settlement">Settlements</strong> in the West Bank that were officially established by
            the government (East Jerusalem excluded).
          </p>

          <p>
            <strong class="label-outpost">Outposts</strong> are new settlements that were largely established by
            extremist settlers since the 1990s without government approval and are considered illegal even according to
            Israeli law.
          </p>

          <p><strong>Area A (18%)</strong>: Palestinian Authority.</p>
          <p><strong>Area B (22%)</strong>: Palestinian Authority, shared security control with Israel.</p>
          <p><strong>Area C (60%)</strong>: Israel.</p>

          <p>
            <strong>Source:</strong>
            <a class="reportlink" href="https://docs.mapbox.com/data/tilesets/reference/mapbox-streets-v8/"
              target="_blank" rel="noopener">
              Mapbox Streets v8
            </a>,
            August 2025 / CRISIS GROUP
          </p>

          <p>
            This map is an update from an earlier database Crisis Group built in 2024.
            <a class="reportlink" href="2024.html" target="_blank">You can look at the archive here.</a>
          </p>
        </div>

      </div>
    </div>

  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- App JS -->
  <script>

    // Modal handlers
    (function () {
      const infoLink = document.getElementById('infoLink');
      const modal = document.getElementById('myModal');
      const dialog = modal.querySelector('.modal-content');
      const closeBtn = modal.querySelector('.close');
      let lastFocused;

      function openModal(e) {
        if (e) e.preventDefault();
        lastFocused = document.activeElement;
        document.body.classList.add('body-lock');
        modal.classList.add('show');
        requestAnimationFrame(() => dialog.focus());
      }
      function closeModal() {
        modal.classList.remove('show');
        document.body.classList.remove('body-lock');
        if (lastFocused && lastFocused.focus) lastFocused.focus();
      }

      infoLink.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
      window.addEventListener('keydown', e => { if (e.key === 'Escape' && modal.classList.contains('show')) closeModal(); });
    })();

    document.addEventListener('DOMContentLoaded', () => {
      const legend = document.querySelector('.legend');
      const header = legend.querySelector('.legend-header');

      header.addEventListener('click', () => {
        legend.classList.toggle('open');
      });
    });

    document.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('myModal');
      if (modal && modal.parentElement !== document.body) {
        document.body.appendChild(modal); // portal to body
      }
    });


    // Map
    mapboxgl.accessToken = 'pk.eyJ1IjoiZGFsdG9ud2IiLCJhIjoiOWdSSXFQSSJ9.HZyjh4g3TAAOAncwelv9Vw';
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/daltonwb/cmhlk1zwz001701qs5yzu76gv',
      center: [130.63703, 30.27664],
      zoom: 4,
      maxZoom: 10,
      minZoom: 4,
      maxBounds: [[90.0, -45.0], [170.0, 75.0]],
      attributionControl: false
    });

    // Disable scroll-zoom by default to avoid scroll jacking
    map.scrollZoom.disable();

    // Optional: a small hint overlay
    const hint = document.createElement('div');
    hint.className = 'hold-ctrl-hint';
    hint.textContent = 'Hold Ctrl (⌘ on Mac) to zoom';
    document.getElementById('map').appendChild(hint);

    let enableTimeout;

    // Listen to wheel with passive:false so we can preventDefault when zooming
    document.getElementById('map').addEventListener('wheel', (evt) => {
      const ctrl = evt.ctrlKey || evt.metaKey; // Ctrl on Windows/Linux, ⌘ on macOS

      if (ctrl) {
        // Use the wheel to zoom the map; prevent page scroll while zooming
        evt.preventDefault();
        if (!map.scrollZoom.isEnabled()) map.scrollZoom.enable();

        // Hide the hint while user is actively using the modifier
        hint.classList.remove('show');

        // Re-disable shortly after the gesture stops
        clearTimeout(enableTimeout);
        enableTimeout = setTimeout(() => {
          map.scrollZoom.disable();
        }, 300); // tweak feel (200–500ms works well)
      } else {
        // Not holding Ctrl/⌘ → let the page scroll; show hint briefly
        map.scrollZoom.disable(); // make sure it stays off
        // Show the hint if the cursor is over the map
        hint.classList.add('show');
        // Auto-hide after a moment so it doesn't linger
        clearTimeout(enableTimeout);
        enableTimeout = setTimeout(() => hint.classList.remove('show'), 1200);
      }
    }, { passive: false });


    const initialView = {};

    map.once('load', () => {
      initialView.center = map.getCenter().toArray();    // [lng, lat]
      initialView.zoom = map.getZoom();
      initialView.bearing = map.getBearing();
      initialView.pitch = map.getPitch();

      // If you ever call map.setPadding(...) elsewhere, also capture:
      if (typeof map.getPadding === 'function') {
        initialView.padding = map.getPadding(); // {top,right,bottom,left}
      }
    });


    class HomeControl {
      onAdd(map) {
        this._map = map;
        const container = document.createElement('div');
        container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';

        const btn = document.createElement('button');
        btn.className = 'mapboxgl-ctrl-icon';
        btn.type = 'button';
        btn.title = 'Reset view';
        btn.innerHTML = '↩️';
        container.appendChild(btn);

        btn.addEventListener('click', () => {
          // Fallback to your desired defaults if initialView isn't populated yet
          const target = Object.keys(initialView).length
            ? initialView
            : { center: [130.63703, 30.27664], zoom: 4, bearing: 0, pitch: 0 };

          map.easeTo({
            ...target,
            // Ensure padding resets if you were using fitBounds/camera padding earlier
            padding: target.padding || { top: 0, right: 0, bottom: 0, left: 0 },
            duration: 800,
            essential: true
          });
        });

        return container;
      }
      onRemove() { this._map = undefined; }
    }

    class ArabicLinkControl {
      onAdd(map) {
        this._map = map;

        // Create a wrapper div that mimics Mapbox control styling
        const container = document.createElement('div');
        container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group arabic-link-ctrl';

        // Create the actual button
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'mapboxgl-ctrl-icon';
        btn.title = 'View Arabic version';
        btn.setAttribute('aria-label', 'View Arabic version');

        // Text label for the button
        btn.textContent = 'AR';

        // Clicking goes to English version (new tab or same tab — pick one)
        btn.addEventListener('click', () => {
          window.location.href = '/ar/visual-explainers/israeli-settlements/'; // <-- change to your English URL
          // or:
          // window.open('index.html', '_blank');
        });

        container.appendChild(btn);
        return container;
      }

      onRemove() {
        this._map = undefined;
      }
    }

    // Add to the map alongside your nav control
    map.addControl(new HomeControl(), 'top-right');
    map.addControl(new mapboxgl.NavigationControl());
    map.addControl(new mapboxgl.FullscreenControl());
    map.addControl(new ArabicLinkControl(), 'top-right');
    // === Responsive Mapbox Attribution (safe, no duplicates) ===
    let attributionCtrl = null;
    let currentCompact = null;

    function installAttribution(compact) {
      // Remove the existing control before adding a new one
      if (attributionCtrl) map.removeControl(attributionCtrl);

      attributionCtrl = new mapboxgl.AttributionControl({
        compact,
        customAttribution:
          'International Crisis Group | Map: <a href="https://www.linkedin.com/in/pkfranz" target="_blank">Paul Franz</a> & Claire Boccon-Gibod | Data: <a href="https://peacenow.org.il/en/settlements-watch/settlements-data/population" target="_blank">PeaceNow</a>, <a href="https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-state-of-palestine" target="_blank">HDX</a>'
      });

      map.addControl(attributionCtrl);
      currentCompact = compact;
    }

    // Initial install — check current map container width
    const container = map.getContainer();
    const compact = container.clientWidth <= 768;
    installAttribution(compact);

    // Watch for container resizes (no duplication)
    const ro = new ResizeObserver(entries => {
      const w = entries[0].contentRect.width;
      const shouldCompact = w <= 768;
      if (shouldCompact !== currentCompact) {
        installAttribution(shouldCompact);
      }
    });
    ro.observe(container);


    map.on('load', () => {
      // Zoom-to-focus button
      const zoomBtn = document.createElement('button');
      zoomBtn.textContent = 'Zoom to East China Sea';
      zoomBtn.className = 'mapbox-zoom-to-focus';
      document.querySelector('.slider-container').appendChild(zoomBtn);

      // Updated bounding box
      const focusBbox = [
        [121.13275, 23.91237],
        [132.21579, 30.87390]
      ];

      zoomBtn.addEventListener('click', () => {
        const cam = map.cameraForBounds(focusBbox, {
          padding: { top: 10, right: 10, bottom: 10, left: 10 },
          maxZoom: 12.5
        });
        map.easeTo({
          ...cam,
          bearing: -24,
          pitch: 37,
          duration: 1200,
          essential: true
        });
      });


      // Data source + layers
      map.addSource('jppts', { type: 'vector', url: 'mapbox://daltonwb.9pyzqxsc' });
      const layerName = 'japan_maritime_locations_-_ja-6k0t7o';

      map.addLayer({
  id: 'jppts-dots',
  type: 'circle',
  source: 'jppts',
  'source-layer': 'japan_maritime_locations_-_ja-6k0t7o',
  paint: {
    // Larger radius that scales smoothly with zoom
    'circle-radius': [
      'interpolate', ['linear'], ['zoom'],
      3, 4,   // small dots at far zooms
      6, 7,   // mid zooms
      10, 10, // large dots at close zooms
      14, 14  // very large at street zooms
    ],
    // Color by type
    'circle-color': [
      'match', ['get', 'type'],
      'natural', '#2E8B57', // green
      'island',  '#0077B6', // blue
      'city',    '#E65100', // orange
      'base',    '#7B1FA2', // purple
      '#444'                 // fallback
    ],
    'circle-stroke-color': '#fff',
    'circle-stroke-width': 1.5,
    'circle-opacity': 0.9
  }
});



    });
  </script>
</body>

</html>